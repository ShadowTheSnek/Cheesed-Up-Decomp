var font;
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_scr_get_languages

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2268
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2819
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|31_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2587
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_toggle_gameframe

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2268
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2819
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|31_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2587
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_lang_parse

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2268
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2819
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|31_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2587
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_scr_lang_get_credits

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2268
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2819
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|31_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2587
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_lang_lexer

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2268
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2819
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|31_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2587
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_lang_exec

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2268
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2819
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|31_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2587
*/
/*
WARNING: Recursive script decompilation (for member variable name resolution) failed for gml_Script_lang_get_identifier

System.InvalidOperationException: Stack empty.
   at System.Collections.Generic.Stack`1.ThrowForEmptyStack()
   at System.Collections.Generic.Stack`1.Pop()
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block, List`1 tempvars, Stack`1 workQueue) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2268
   at UndertaleModLib.Decompiler.Decompiler.DecompileFromBlock(DecompileContext context, Dictionary`2 blocks, Block block) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2819
   at UndertaleModLib.Decompiler.Decompiler.<DecompileFromBlock>g__FindActualNameForAnonymousCodeObject|31_2(DecompileContext context, UndertaleCode anonymousCodeObject) in D:\a\UndertaleModToolCE\UndertaleModToolCE\UndertaleModLib\Decompiler\Decompiler.cs:line 2587
*/
surface_depth_disable(1)
debug_event("OutputDebugOn")
exception_unhandled_handler(function(argument0) //gml_Script_anon@815@scr_startup
{
    audio_stop_all()
    with (obj_fmod)
    {
        fmod_event_instance_set_paused_all(1)
        fmod_update()
    }
    audio_bus_main.bypass = 1
    audio_master_gain(1)
    audio_play_sound(sfx_pephurt, 0, false, (global.option_master_volume * global.option_sfx_volume))
    @@try_hook@@(636, 672)
    var surf = surface_create_fix(obj_screensizer.actual_width, obj_screensizer.actual_height)
    surface_set_target(surf)
    draw_clear(c_black)
    gpu_set_blendmode_ext(bm_one, bm_inv_src_alpha)
    scr_draw_screen(0, 0, 1, 1, 1, 1)
    if (instance_exists(obj_screensizer) && surface_exists(obj_screensizer.gui_surf))
        draw_surface(obj_screensizer.gui_surf, 0, 0)
    gpu_set_blendmode(bm_normal)
    surface_reset_target()
    surface_save(surf, "crash_img.png")
    surface_free(surf)
    @@try_unhook@@()
    show_debug_message(string(argument0))
    show_message(string("The Cheese fucked Up!\n\n---\n\n{0}\n---\n\nstacktrace: {1}", argument0.longMessage, argument0.stacktrace))
    var _f = file_text_open_write("crash_log.txt")
    file_text_write_string(_f, json_stringify(argument0))
    file_text_close(_f)
}
)
gml_Script_scr_get_languages()
pal_swap_init_system_fix(shd_pal_swapper, 1)
texture_debug_messages(0)
global.bigfont = font_add_sprite_ext(spr_font, "ABCDEFGHIJKLMNOPQRSTUVWXYZ!.1234567890:?'\"_-[]▼()&#", 1, 0)
global.smallfont = font_add_sprite_ext(spr_smallerfont, "ABCDEFGHIJKLMNOPQRSTUVWXYZ!.:?1234567890", 1, 0)
global.lapfont = font_add_sprite_ext(spr_lapfont, "1234567890", 1, -1)
global.lapfont_ss = font_add_sprite_ext(spr_lapfont_ss, "1234567890", 1, -1)
global.lapfont2 = font_add_sprite_ext(spr_lapfontbig, "0123456789", 1, -2)
global.lapfont2_ss = font_add_sprite_ext(spr_lapfontbig_ss, "0123456789", 1, -2)
global.tutorialfont = font_add_sprite_ext(spr_tutorialfont, "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!,.:0123456789'?-", 1, 2)
global.creditsfont = font_add_sprite_ext(spr_creditsfont, "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz.:!0123456789?'\"ÁÉÍÓÚáéíóú_-[]▼()&#风雨廊桥전태양*яиБжидГзвбнль", 1, 2)
global.moneyfont = font_add_sprite_ext(spr_stickmoney_font, "0123456789$-", 1, 0)
global.font_small = font_add_sprite_ext(spr_smallfont, "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!._1234567890:;?▯|*/',\"()=-+@█%~ÁÉÍÓÚáéíóúÑñ[]<>$", 1, -1)
global.collectfont = font_add_sprite_ext(spr_font_collect, "0123456789", 1, 0)
global.combofont = font_add_sprite_ext(spr_font_combo, "0123456789/:", 1, 0)
global.combofont2 = font_add_sprite_ext(spr_tv_combobubbletext, "0123456789", 1, 0)
global.combofont2BN = font_add_sprite_ext(spr_tv_combobubbletextBN, "0123456789", 1, 0)
global.wartimerfont1 = font_add_sprite_ext(spr_wartimer_font1, "1234567890", 1, 0)
global.wartimerfont2 = font_add_sprite_ext(spr_wartimer_font2, "1234567890", 1, 0)
global.collectfontSP = font_add_sprite_ext(spr_font_collectSP, "0123456789", 1, 0)
global.combofontSP = font_add_sprite_ext(spr_tv_combobubbletextSP, "1234567890x", 1, 0)
global.collectfontBN = font_add_sprite_ext(spr_font_collectBN, "0123456789", 1, 0)
global.sugarypromptfont = font_add_sprite_ext(spr_promptfont, "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz.:!0123456789?'\"ÁÉÍÓÚáéíóú_-[]▼()&#风雨廊桥전태양*яиБжидГзвбнль", 1, 0)
global.candlefont = font_add_sprite_ext(spr_fontcandle, "0123456789", 1, 0)
global.smallfont_ss = font_add_sprite_ext(spr_smallfont_ss, "ABCDEFGHIJKLMNOPQRSTUVWXYZ!.:?1234567890-", 1, 0)
global.bigfont_ss = font_add_sprite_ext(spr_font_ss, "ABCDEFGHIJKLMNOPQRSTUVWXYZ!.0123456789:- ", 1, -1)
global.smallnumber_fnt = font_add_sprite_ext(spr_smallnumber, "1234567890-+", 1, 0)
global.font_map = ds_map_create()
ds_map_set(global.font_map, "bigfont_en", global.bigfont)
ds_map_set(global.font_map, "smallfont_en", global.smallfont)
ds_map_set(global.font_map, "tutorialfont_en", global.tutorialfont)
ds_map_set(global.font_map, "creditsfont_en", global.creditsfont)
ds_map_set(global.font_map, "captionfont_en", fnt_caption)
ds_map_set(global.font_map, "font_small_en", global.font_small)
ds_map_set(global.font_map, "sugarypromptfont_en", global.sugarypromptfont)
ds_map_set(global.font_map, "smallfont_ss_en", global.smallfont_ss)
ds_map_set(global.font_map, "bigfont_ss_en", global.bigfont_ss)
trace("--- Custom fonts --- size: ", ds_map_size(global.lang_map))
var key = ds_map_find_first(global.lang_map)
while (key != undefined)
{
    var lang = ds_map_find_value(global.lang_map, key)
    if (ds_map_find_value(lang, "custom_fonts") != 1)
    {
        key = ds_map_find_next(global.lang_map, key)
        continue
    }
    else
    {
        show_message("Custom fonts are not currently supported!")
        break
    }
}
global.custom_patterns = ds_map_create()
global.lap4time = 1
function load_custom_palettes() //gml_Script_load_custom_palettes
{
    for (var i = ds_map_find_first(global.custom_patterns); i != undefined; i = ds_map_find_next(global.custom_patterns, i))
        sprite_delete(ds_map_find_value(global.custom_patterns, i))
    ds_map_clear(global.custom_patterns)
    global.custom_palettes = []
    var root = "palettes/"
    for (var file = file_find_first(concat(root, "*.json"), 0); file != ""; file = file_find_next())
    {
        var str = buffer_load(concat(root, file))
        var json = json_parse(buffer_read(str, buffer_text))
        if is_struct(json)
            array_push(global.custom_palettes, json)
        buffer_delete(str)
    }
    for (file = file_find_first(concat(root, "*.png"), 0); file != ""; file = file_find_next())
    {
        var spr = sprite_add(concat(root, file), 1, false, false, 0, 0)
        array_push(global.custom_patterns, spr)
    }
    file_find_close()
}

function load_moddedconfig() //gml_Script_load_moddedconfig
{
    ini_open("saveData.ini")
    global.richpresence = ini_read_real("Modded", "richpresence", 1)
    global.gameplay = ini_read_real("Modded", "gameplay", 1)
    global.experimental = ini_read_real("Modded", "experimental", 0)
    global.performance = ini_read_real("Modded", "performance", 0)
    global.uppercut = ini_read_real("Modded", "uppercut", 1)
    global.poundjump = ini_read_real("Modded", "poundjump", 0)
    global.attackstyle = ini_read_real("Modded", "attackstyle", 0)
    global.shootstyle = ini_read_real("Modded", "shootstyle", 0)
    global.doublegrab = ini_read_real("Modded", "doublegrab", 0)
    global.autoparry = ini_read_real("Modded", "autoparry", 0)
    global.shootbutton = ini_read_real("Modded", "shootbutton", 0)
    global.heatmeter = ini_read_real("Modded", "heatmeter", 0)
    global.swapgrab = ini_read_real("Modded", "swapgrab", 0)
    global.unfocus_pause = ini_read_real("Modded", "unfocus_pause", 0)
    global.border = ini_read_real("Modded", "border", -1)
    global.holidayoverride = ini_read_real("Modded", "holidayoverride", -1)
    global.vigisuperjump = ini_read_real("Modded", "vigisuperjump", -1)
    global.panicbg = ini_read_real("Modded", "panicbg", 1)
    global.panictilt = ini_read_real("Modded", "panictilt", 0)
    global.sloperot = ini_read_real("Modded", "sloperot", 0)
    global.inputdisplay = ini_read_real("Modded", "inputdisplay", 0)
    global.showfps = ini_read_real("Modded", "showfps", 0)
    global.afterimage = ini_read_real("Modded", "afterimage", 0)
    global.smoothcam = ini_read_real("Modded", "smoothcam", 0)
    global.secrettiles = ini_read_real("Modded", "secrettiles", 0)
    global.hud = ini_read_real("Modded", "hud", 0)
    global.blockstyle = ini_read_real("Modded", "blockstyle", (0 << 0))
    global.roomnames = ini_read_real("Modded", "roomnames", 0)
    global.machsnd = ini_read_real("Modded", "machsnd", 0)
    global.sugaryoverride = ini_read_real("Modded", "sugaryoverride", 0)
    global.enemyrot = ini_read_real("Modded", "enemyrot", 0)
    global.lapmode = ini_read_real("Modded", "lapmode", (1 << 0))
    global.parrypizzaface = ini_read_real("Modded", "parrypizzaface", 1)
    global.lap3checkpoint = ini_read_real("Modded", "lap3checkpoint", 1)
    global.lap4checkpoint = ini_read_real("Modded", "lap4checkpoint", 1)
    global.chasekind = ini_read_real("Modded", "chasekind", 1)
    if ini_key_exists("Modded", "pizzellesugaryoverride")
    {
        global.sugaryoverride = ini_read_real("Modded", "pizzellesugaryoverride", 0)
        ini_key_delete("Modded", "pizzellesugaryoverride")
        ini_write_real("Modded", "sugaryoverride", global.sugaryoverride)
        global.vigisuperjump = (ini_read_real("Modded", "vigisuperjump", 0) ? 2 : 0)
        ini_write_real("Modded", "vigisuperjump", global.vigisuperjump)
    }
    if ini_section_exists("ControlsKeysPTU")
        ini_section_delete("ControlsKeysPTU")
    if ((!shaders_are_supported()) && (!global.performance))
    {
        show_message("It seems your device doesn't support shaders.\nPerformance mode has been turned on.")
        global.performance = 1
    }
    ini_close()
    load_custom_palettes()
}

load_moddedconfig()
function scr_indexpalettes() //gml_Script_scr_indexpalettes
{
    pal_swap_index_palette(spr_peppalette)
    pal_swap_index_palette(spr_noisepalette)
    pal_swap_index_palette(spr_vigipalette)
    pal_swap_index_palette(spr_snickpalette)
    pal_swap_index_palette(spr_pizzypalette)
    pal_swap_index_palette(spr_pizzanopalette)
    pal_swap_index_palette(spr_bopalette)
}

ini_open("saveData.ini")
if (os_version < 655360 || os_type != os_windows)
{
    trace("Running on fucked up software, turned off gameframe")
    global.gameframe_enabled = 0
}
else
    gml_Script_toggle_gameframe(ini_read_real("Modded", "gameframe", 1))
ini_close()
global.goodmode = 0
global.sandbox = 1
global.saveloaded = 0
global.secrettile_clip_distance = 150
global.secrettile_fade_size = 0.85
global.secrettile_fade_intensity = 32
function shader_set_fix(argument0) //gml_Script_shader_set_fix
{
    if global.performance
        return;
    shader_set(argument0)
}

function surface_create_fix(argument0, argument1, argument2) //gml_Script_surface_create_fix
{
    if (argument2 == undefined)
        argument2 = 6
    if (argument0 > 16384 || argument1 > 16384)
        log_source("SURFACE TOO LARGE!")
    return surface_create(min(argument0, 16384), min(argument1, 16384), argument2);
}

